{"version":3,"sources":["webpack://PingOneAuth/webpack/universalModuleDefinition","webpack://PingOneAuth/webpack/bootstrap","webpack://PingOneAuth/external \"stream\"","webpack://PingOneAuth/external \"zlib\"","webpack://PingOneAuth/external \"url\"","webpack://PingOneAuth//Users/halynakropelnytska/git/ping/github/pingone-js-sdk/node_modules/@babel/runtime/regenerator/index.js","webpack://PingOneAuth//Users/halynakropelnytska/git/ping/github/pingone-js-sdk/node_modules/@babel/runtime/helpers/asyncToGenerator.js","webpack://PingOneAuth//Users/halynakropelnytska/git/ping/github/pingone-js-sdk/node_modules/@babel/runtime/helpers/classCallCheck.js","webpack://PingOneAuth//Users/halynakropelnytska/git/ping/github/pingone-js-sdk/node_modules/@babel/runtime/helpers/createClass.js","webpack://PingOneAuth/external \"http\"","webpack://PingOneAuth//Users/halynakropelnytska/git/ping/github/pingone-js-sdk/node_modules/cross-fetch/dist/node-ponyfill.js","webpack://PingOneAuth/external \"https\"","webpack://PingOneAuth/./src/api.js","webpack://PingOneAuth//Users/halynakropelnytska/git/ping/github/pingone-js-sdk/node_modules/regenerator-runtime/runtime.js","webpack://PingOneAuth/../core/src/http.js","webpack://PingOneAuth//Users/halynakropelnytska/git/ping/github/pingone-js-sdk/node_modules/node-fetch/lib/index.mjs","webpack://PingOneAuth/../core/src/oauth.js"],"names":["root","factory","exports","module","define","amd","global","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","require","asyncGeneratorStep","gen","resolve","reject","_next","_throw","arg","info","error","done","Promise","then","fn","self","this","args","arguments","apply","err","undefined","instance","Constructor","TypeError","_defineProperties","target","props","length","descriptor","configurable","writable","protoProps","staticProps","nodeFetch","realFetch","default","fetch","url","options","test","Headers","Request","Response","Http","ApiClient","config","issuer","AUTH_URI","environmentID","apiUrl","API_URI","http","email","username","populationId","postJson","body","population","id","headers","userId","userName","getJson","firstName","lastName","patchJson","given","family","currentPassword","newPassword","putJson","password","forceChange","recoveryCode","policies","defaultPasswordPolicy","_embedded","passwordPolicies","filter","policy","minCharacters","maxRepeatedCharacters","passwordPattern","pattern","replace","min","max","runtime","Op","hasOwn","$Symbol","iteratorSymbol","iterator","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","wrap","innerFn","outerFn","tryLocsList","protoGenerator","Generator","generator","context","Context","_invoke","state","method","Error","doneResult","delegate","delegateResult","maybeInvokeDelegate","ContinueSentinel","sent","_sent","dispatchException","abrupt","record","tryCatch","type","makeInvokeMethod","obj","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","getPrototypeOf","NativeIteratorPrototype","values","Gp","defineIteratorMethods","forEach","AsyncIterator","PromiseImpl","previousPromise","callInvokeWithMethodAndArg","invoke","result","__await","unwrapped","resultName","next","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","push","resetTryEntry","completion","reset","iterable","iteratorMethod","isNaN","constructor","displayName","isGeneratorFunction","genFun","ctor","mark","setPrototypeOf","__proto__","awrap","async","iter","toString","keys","reverse","pop","skipTempReset","prev","charAt","slice","stop","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","thrown","delegateYield","regeneratorRuntime","accidentalStrictMode","Function","OAuth","httpConfig","oauth","request","accessToken","getAccessToken","getToken","errorFilter","accessTokenResponse","json","Authorization","access_token","response","status","JSON","stringify","uri","addAccessToken","assign","Accept","res","Readable","BUFFER","TYPE","Blob","blobParts","buffers","size","a","Number","element","buffer","Buffer","ArrayBuffer","isView","from","byteOffset","byteLength","String","concat","toLowerCase","buf","ab","readable","_read","start","end","relativeStart","relativeEnd","Math","span","slicedBuffer","blob","FetchError","message","systemError","code","errno","captureStackTrace","convert","defineProperties","e","INTERNALS","PassThrough","Body","_this","_ref","_ref$size","_ref$timeout","timeout","isURLSearchParams","isBlob","isBuffer","disturbed","on","consumeBody","_this4","alloc","stream","accum","accumBytes","abort","resTimeout","setTimeout","chunk","clearTimeout","append","delete","getAll","has","set","sort","arrayBuffer","clone","p1","p2","bodyUsed","getBoundary","pipe","extractContentType","getTotalBytes","getLengthSync","_lengthRetrievers","hasKnownLength","ct","_this2","parse","_this3","str","charset","exec","convertBody","text","mixIn","proto","getOwnPropertyNames","desc","getOwnPropertyDescriptor","invalidTokenRegex","invalidHeaderCharRegex","validateName","validateValue","find","map","MAP","init","rawHeaders","raw","headerNames","headerName","pairs","pair","Array","join","callback","thisArg","getHeaders","_pairs$i","createHeadersIterator","kind","k","entries","INTERNAL","HeadersIteratorPrototype","index","_INTERNAL","exportNodeCompatibleHeaders","hostHeaderKey","INTERNALS$1","STATUS_CODES","opts","contentType","statusText","counter","ok","redirected","INTERNALS$2","parse_url","format_url","format","streamDestructionSupported","isRequest","input","parsedURL","href","toUpperCase","inputBody","signal","isAbortSignal","redirect","follow","compress","agent","AbortError","PassThrough$1","resolve_url","protocol","hostname","contentLengthValue","totalBytes","getNodeRequestOptions","send","destroy","emit","aborted","abortAndFinalize","finalize","req","reqTimeout","removeEventListener","addEventListener","once","socket","isArray","val","createHeadersLenient","isRedirect","statusCode","location","locationURL","requestOpts","response_options","statusMessage","codings","zlibOptions","flush","Z_SYNC_FLUSH","finishFlush","createGunzip","createBrotliDecompress","createInflate","createInflateRaw","dest","write","writeToStream","params","grant_type","scope","scopes","client_id","clientID","client_secret","clientSecret","encodeURIComponent"],"mappings":"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","file":"@pingone/nodejs-sdk-api.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"PingOneAuth\"] = factory();\n\telse\n\t\troot[\"PingOneAuth\"] = factory();\n})(global, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 10);\n","module.exports = require(\"stream\");","module.exports = require(\"zlib\");","module.exports = require(\"url\");","module.exports = require(\"regenerator-runtime\");\n","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nfunction _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}\n\nmodule.exports = _asyncToGenerator;","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck;","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nmodule.exports = _createClass;","module.exports = require(\"http\");","var nodeFetch = require('node-fetch')\nvar realFetch = nodeFetch.default || nodeFetch\n\nvar fetch = function (url, options) {\n  // Support schemaless URIs on the server for parity with the browser.\n  // Ex: //github.com/ -> https://github.com/\n  if (/^\\/\\//.test(url)) {\n    url = 'https:' + url\n  }\n  return realFetch.call(this, url, options)\n}\n\nmodule.exports = exports = fetch\nexports.fetch = fetch\nexports.Headers = nodeFetch.Headers\nexports.Request = nodeFetch.Request\nexports.Response = nodeFetch.Response\n\n// Needed for TypeScript consumers without esModuleInterop.\nexports.default = fetch\n","module.exports = require(\"https\");","const Http = require(\"@pingone/nodejs-sdk-core/src/http\");\n\n/**\n * Base client to work with PingOne API\n *\n * @class ApiClient\n */\nclass ApiClient {\n    constructor (config) {\n        this.issuer = `${\n            config.AUTH_URI ? config.AUTH_URI : \"https://auth.pingone.com\"\n        }/${config.environmentID}/as`;\n        config.issuer = this.issuer;\n        this.apiUrl = `${config.API_URI}/v1/environments/${config.environmentID}`;\n        this.http = new Http(config);\n    }\n\n    /**\n   * Register a new user.\n   *\n   * @param email\n   * @param username\n   * @param populationId\n   * @returns {*}\n   */\n    async addUser (email, username, populationId) {\n        const url = `${this.apiUrl}/users`;\n\n        return this.http.postJson(url, {\n            body: {\n                email: email,\n                username: username,\n                population: {\n                    id: populationId\n                }\n            },\n            headers: {\n                \"Content-type\": \"application/json\"\n            }\n        });\n    }\n\n    /**\n   * Delete user\n   * @param userId\n   * @returns {Promise<*>}\n   */\n    async deleteUser (userId) {\n        const url = `${this.apiUrl}/users/${userId}`;\n        return this.http.delete(url, null);\n    }\n\n    /**\n   * Find user\n   * @param userName\n   * @returns {*}\n   */\n    async findUser (userName) {\n        const url = `${this.apiUrl}/users?filter=email eq \"${userName}\" or username eq \"${userName}\"`;\n        return this.http.getJson(url, null);\n    }\n\n    /**\n   * Get all populations\n   * @returns {*}\n   */\n    async getPopulations () {\n        const url = `${this.apiUrl}/populations`;\n        return this.http.getJson(url, null);\n    }\n\n    /**\n   * Update user attribute values specified in the request body. Attributes omitted from the request body are not updated or removed\n   * @function updateUser\n   * @param  {string}  userId      - user Id\n   * @param {string} firstName     - user's first name\n   * @param {string} lastName      - user's last name\n   * @returns {Promise} - promise of update endpoint response\n   *\n   */\n    async updateUser (userId, firstName, lastName) {\n        const url = `${this.apiUrl}/users/${userId}`;\n        return this.http.patchJson(url, {\n            body: {\n                name: {\n                    given: firstName,\n                    family: lastName\n                }\n            }\n        });\n    }\n\n    /**\n   * Change user password\n   * @param userId\n   * @param currentPassword\n   * @param newPassword\n   * @returns {*}\n   */\n    async changePassword (userId, currentPassword, newPassword) {\n        const url = `${this.apiUrl}/users/${userId}/password`;\n\n        return this.http.putJson(url, {\n            body: {\n                currentPassword: currentPassword,\n                newPassword: newPassword\n            },\n            headers: {\n                \"Content-type\": \"application/vnd.pingidentity.password.reset+json\"\n            }\n        });\n    }\n\n    /**\n   * Set user password\n   * @param userId\n   * @param password\n   * @param forceChange\n   * @returns {*}\n   */\n    async setPassword (userId, password, forceChange = false) {\n        const url = `${this.apiUrl}/users/${userId}/password`;\n\n        return this.http.putJson(url, {\n            body: {\n                value: password,\n                forceChange: forceChange\n            },\n            headers: {\n                \"Content-type\": \"application/vnd.pingidentity.password.set+json\"\n            }\n        });\n    }\n\n    /**\n   * Send recovery code\n   * @param userId\n   * @returns {*}\n   */\n    async sendRecoveryCode (userId) {\n        const url = `${this.apiUrl}/users/${userId}/password`;\n\n        return this.http.postJson(url, {\n            headers: {\n                \"Content-type\":\n          \"application/vnd.pingidentity.password.sendRecoveryCode+json\"\n            }\n        });\n    }\n\n    /**\n   * Recover user password\n   * @param userId\n   * @param recoveryCode\n   * @param newPassword\n   * @returns {*}\n   */\n    async recoverPassword (userId, recoveryCode, newPassword) {\n        const url = `${this.apiUrl}/users/${userId}/password`;\n\n        return this.http.postJson(url, {\n            body: {\n                recoveryCode: recoveryCode,\n                newPassword: newPassword\n            },\n            headers: {\n                \"Content-type\": \"application/vnd.pingidentity.password.recover+json\"\n            }\n        });\n    }\n\n    /**\n   * Get password pattern\n   * @returns {PromiseLike<any> | Promise<any>}\n   */\n    async getPasswordPattern () {\n        const url = `${this.apiUrl}/passwordPolicies`;\n        return this.http.getJson(url, null).then(policies => {\n            const passwordPolicies = policies._embedded.passwordPolicies;\n            const defaultPasswordPolicy = passwordPolicies.filter(\n                policy =>\n                    (policy.default === true &&\n            policy.minCharacters &&\n            policy.maxRepeatedCharacters) ||\n          policy.name === \"Standard\"\n            );\n            if (defaultPasswordPolicy) {\n                let passwordPattern = \"^(?:\";\n                // Construct lookahead assertion for each policy with \"minCharacters\" group\n                const minCharacters = defaultPasswordPolicy[0].minCharacters;\n                for (const pattern in minCharacters) {\n                    // Escape all special for javascript characters\n                    passwordPattern = `${passwordPattern}(?=(?:.*[${pattern.replace(\n                        /[.*+?^${}()|[\\]\\\\]/g,\n                        \"\\\\$&\"\n                    )}]){${minCharacters[pattern]},})`;\n                }\n                // Set how many consecutive characters are allowed\n                passwordPattern = `${passwordPattern})(?!.*(.)\\\\1{${defaultPasswordPolicy[0].maxRepeatedCharacters},})`;\n                // Set how many characters password should have\n                // eslint-disable-next-line max-len\n                passwordPattern = `${passwordPattern}.{${defaultPasswordPolicy[0].length.min},${defaultPasswordPolicy[0].length.max}}$`;\n                return passwordPattern;\n            }\n        });\n    }\n}\n\nmodule.exports = ApiClient;\n","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunctionPrototype[toStringTagSymbol] =\n    GeneratorFunction.displayName = \"GeneratorFunction\";\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      prototype[method] = function(arg) {\n        return this._invoke(method, arg);\n      };\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      if (!(toStringTagSymbol in genFun)) {\n        genFun[toStringTagSymbol] = \"GeneratorFunction\";\n      }\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return PromiseImpl.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return PromiseImpl.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    if (PromiseImpl === void 0) PromiseImpl = Promise;\n\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList),\n      PromiseImpl\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  Gp[toStringTagSymbol] = \"Generator\";\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  Gp[iteratorSymbol] = function() {\n    return this;\n  };\n\n  Gp.toString = function() {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  typeof module === \"object\" ? module.exports : {}\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n}\n","const fetch = require(\"cross-fetch\");\nconst OAuth = require(\"./oauth\");\n\nconst PUT_METHOD = \"put\";\nconst POST_METHOD = \"post\";\n\nclass Http {\n    constructor (httpConfig) {\n        this.oauth = new OAuth(httpConfig);\n    }\n\n    async addAccessToken (request) {\n        if (!this.oauth) {\n            return Promise.resolve();\n        }\n\n        if (typeof this.accessToken === \"undefined\") {\n            const getToken = await this.oauth.getAccessToken();\n            const accessTokenResponse = await this.errorFilter(getToken);\n            this.accessToken = await accessTokenResponse.json();\n        }\n        request.headers.Authorization = `Bearer ${this.accessToken.access_token}`;\n    }\n\n    async errorFilter (response) {\n        if (response.status >= 200 && response.status < 300) {\n            return response;\n        } else {\n            const error = await response.json();\n            throw new Error(JSON.stringify(error));\n        }\n    }\n\n    async http (uri, request) {\n    // eslint-disable-next-line no-param-reassign\n        request = request || {};\n        request.method = request.method || \"get\";\n        await this.addAccessToken(request);\n        const response = await fetch(uri, request);\n        return this.errorFilter(response);\n    }\n\n    async delete (uri, request) {\n        return this.http(uri, Object.assign(request || {}, { method: \"delete\" }));\n    }\n\n    async json (uri, request) {\n    // eslint-disable-next-line no-param-reassign\n        request = request || {};\n        request.headers = Object.assign(\n            {\n                Accept: \"application/json\"\n            },\n            request.headers\n        );\n        return this.http(uri, request).then(res => res.json());\n    }\n\n    async getJson (uri, request) {\n    // eslint-disable-next-line no-param-reassign\n        request = request || {};\n        request.method = \"get\";\n        return this.json(uri, request);\n    }\n\n    async post (uri, request) {\n    // eslint-disable-next-line no-param-reassign\n        request = request || {};\n        request.method = POST_METHOD;\n        return this.http(uri, request);\n    }\n\n    async postJson (uri, request) {\n    // eslint-disable-next-line no-param-reassign\n        request = request || {};\n        request.method = POST_METHOD;\n        request.body = JSON.stringify(request.body);\n        return this.json(uri, request);\n    }\n\n    async patchJson (uri, request) {\n    // eslint-disable-next-line no-param-reassign\n        request = request || {};\n        request.method = \"patch\";\n        request.body = JSON.stringify(request.body);\n        return this.json(uri, request);\n    }\n\n    async putJson (uri, request) {\n    // eslint-disable-next-line no-param-reassign\n        request = request || {};\n        request.method = PUT_METHOD;\n        request.body = JSON.stringify(request.body);\n        return this.json(uri, request);\n    }\n\n    async put (uri, request) {\n    // eslint-disable-next-line no-param-reassign\n        request = request || {};\n        request.method = PUT_METHOD;\n        return this.http(uri, request);\n    }\n}\n\nmodule.exports = Http;\n","import Stream from 'stream';\nimport http from 'http';\nimport Url from 'url';\nimport https from 'https';\nimport zlib from 'zlib';\n\n// Based on https://github.com/tmpvar/jsdom/blob/aa85b2abf07766ff7bf5c1f6daafb3726f2f2db5/lib/jsdom/living/blob.js\n\n// fix for \"Readable\" isn't a named export issue\nconst Readable = Stream.Readable;\n\nconst BUFFER = Symbol('buffer');\nconst TYPE = Symbol('type');\n\nclass Blob {\n\tconstructor() {\n\t\tthis[TYPE] = '';\n\n\t\tconst blobParts = arguments[0];\n\t\tconst options = arguments[1];\n\n\t\tconst buffers = [];\n\t\tlet size = 0;\n\n\t\tif (blobParts) {\n\t\t\tconst a = blobParts;\n\t\t\tconst length = Number(a.length);\n\t\t\tfor (let i = 0; i < length; i++) {\n\t\t\t\tconst element = a[i];\n\t\t\t\tlet buffer;\n\t\t\t\tif (element instanceof Buffer) {\n\t\t\t\t\tbuffer = element;\n\t\t\t\t} else if (ArrayBuffer.isView(element)) {\n\t\t\t\t\tbuffer = Buffer.from(element.buffer, element.byteOffset, element.byteLength);\n\t\t\t\t} else if (element instanceof ArrayBuffer) {\n\t\t\t\t\tbuffer = Buffer.from(element);\n\t\t\t\t} else if (element instanceof Blob) {\n\t\t\t\t\tbuffer = element[BUFFER];\n\t\t\t\t} else {\n\t\t\t\t\tbuffer = Buffer.from(typeof element === 'string' ? element : String(element));\n\t\t\t\t}\n\t\t\t\tsize += buffer.length;\n\t\t\t\tbuffers.push(buffer);\n\t\t\t}\n\t\t}\n\n\t\tthis[BUFFER] = Buffer.concat(buffers);\n\n\t\tlet type = options && options.type !== undefined && String(options.type).toLowerCase();\n\t\tif (type && !/[^\\u0020-\\u007E]/.test(type)) {\n\t\t\tthis[TYPE] = type;\n\t\t}\n\t}\n\tget size() {\n\t\treturn this[BUFFER].length;\n\t}\n\tget type() {\n\t\treturn this[TYPE];\n\t}\n\ttext() {\n\t\treturn Promise.resolve(this[BUFFER].toString());\n\t}\n\tarrayBuffer() {\n\t\tconst buf = this[BUFFER];\n\t\tconst ab = buf.buffer.slice(buf.byteOffset, buf.byteOffset + buf.byteLength);\n\t\treturn Promise.resolve(ab);\n\t}\n\tstream() {\n\t\tconst readable = new Readable();\n\t\treadable._read = function () {};\n\t\treadable.push(this[BUFFER]);\n\t\treadable.push(null);\n\t\treturn readable;\n\t}\n\ttoString() {\n\t\treturn '[object Blob]';\n\t}\n\tslice() {\n\t\tconst size = this.size;\n\n\t\tconst start = arguments[0];\n\t\tconst end = arguments[1];\n\t\tlet relativeStart, relativeEnd;\n\t\tif (start === undefined) {\n\t\t\trelativeStart = 0;\n\t\t} else if (start < 0) {\n\t\t\trelativeStart = Math.max(size + start, 0);\n\t\t} else {\n\t\t\trelativeStart = Math.min(start, size);\n\t\t}\n\t\tif (end === undefined) {\n\t\t\trelativeEnd = size;\n\t\t} else if (end < 0) {\n\t\t\trelativeEnd = Math.max(size + end, 0);\n\t\t} else {\n\t\t\trelativeEnd = Math.min(end, size);\n\t\t}\n\t\tconst span = Math.max(relativeEnd - relativeStart, 0);\n\n\t\tconst buffer = this[BUFFER];\n\t\tconst slicedBuffer = buffer.slice(relativeStart, relativeStart + span);\n\t\tconst blob = new Blob([], { type: arguments[2] });\n\t\tblob[BUFFER] = slicedBuffer;\n\t\treturn blob;\n\t}\n}\n\nObject.defineProperties(Blob.prototype, {\n\tsize: { enumerable: true },\n\ttype: { enumerable: true },\n\tslice: { enumerable: true }\n});\n\nObject.defineProperty(Blob.prototype, Symbol.toStringTag, {\n\tvalue: 'Blob',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\n/**\n * fetch-error.js\n *\n * FetchError interface for operational errors\n */\n\n/**\n * Create FetchError instance\n *\n * @param   String      message      Error message for human\n * @param   String      type         Error type for machine\n * @param   String      systemError  For Node.js system error\n * @return  FetchError\n */\nfunction FetchError(message, type, systemError) {\n  Error.call(this, message);\n\n  this.message = message;\n  this.type = type;\n\n  // when err.type is `system`, err.code contains system error code\n  if (systemError) {\n    this.code = this.errno = systemError.code;\n  }\n\n  // hide custom error implementation details from end-users\n  Error.captureStackTrace(this, this.constructor);\n}\n\nFetchError.prototype = Object.create(Error.prototype);\nFetchError.prototype.constructor = FetchError;\nFetchError.prototype.name = 'FetchError';\n\nlet convert;\ntry {\n\tconvert = require('encoding').convert;\n} catch (e) {}\n\nconst INTERNALS = Symbol('Body internals');\n\n// fix an issue where \"PassThrough\" isn't a named export for node <10\nconst PassThrough = Stream.PassThrough;\n\n/**\n * Body mixin\n *\n * Ref: https://fetch.spec.whatwg.org/#body\n *\n * @param   Stream  body  Readable stream\n * @param   Object  opts  Response options\n * @return  Void\n */\nfunction Body(body) {\n\tvar _this = this;\n\n\tvar _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n\t    _ref$size = _ref.size;\n\n\tlet size = _ref$size === undefined ? 0 : _ref$size;\n\tvar _ref$timeout = _ref.timeout;\n\tlet timeout = _ref$timeout === undefined ? 0 : _ref$timeout;\n\n\tif (body == null) {\n\t\t// body is undefined or null\n\t\tbody = null;\n\t} else if (isURLSearchParams(body)) {\n\t\t// body is a URLSearchParams\n\t\tbody = Buffer.from(body.toString());\n\t} else if (isBlob(body)) ; else if (Buffer.isBuffer(body)) ; else if (Object.prototype.toString.call(body) === '[object ArrayBuffer]') {\n\t\t// body is ArrayBuffer\n\t\tbody = Buffer.from(body);\n\t} else if (ArrayBuffer.isView(body)) {\n\t\t// body is ArrayBufferView\n\t\tbody = Buffer.from(body.buffer, body.byteOffset, body.byteLength);\n\t} else if (body instanceof Stream) ; else {\n\t\t// none of the above\n\t\t// coerce to string then buffer\n\t\tbody = Buffer.from(String(body));\n\t}\n\tthis[INTERNALS] = {\n\t\tbody,\n\t\tdisturbed: false,\n\t\terror: null\n\t};\n\tthis.size = size;\n\tthis.timeout = timeout;\n\n\tif (body instanceof Stream) {\n\t\tbody.on('error', function (err) {\n\t\t\tconst error = err.name === 'AbortError' ? err : new FetchError(`Invalid response body while trying to fetch ${_this.url}: ${err.message}`, 'system', err);\n\t\t\t_this[INTERNALS].error = error;\n\t\t});\n\t}\n}\n\nBody.prototype = {\n\tget body() {\n\t\treturn this[INTERNALS].body;\n\t},\n\n\tget bodyUsed() {\n\t\treturn this[INTERNALS].disturbed;\n\t},\n\n\t/**\n  * Decode response as ArrayBuffer\n  *\n  * @return  Promise\n  */\n\tarrayBuffer() {\n\t\treturn consumeBody.call(this).then(function (buf) {\n\t\t\treturn buf.buffer.slice(buf.byteOffset, buf.byteOffset + buf.byteLength);\n\t\t});\n\t},\n\n\t/**\n  * Return raw response as Blob\n  *\n  * @return Promise\n  */\n\tblob() {\n\t\tlet ct = this.headers && this.headers.get('content-type') || '';\n\t\treturn consumeBody.call(this).then(function (buf) {\n\t\t\treturn Object.assign(\n\t\t\t// Prevent copying\n\t\t\tnew Blob([], {\n\t\t\t\ttype: ct.toLowerCase()\n\t\t\t}), {\n\t\t\t\t[BUFFER]: buf\n\t\t\t});\n\t\t});\n\t},\n\n\t/**\n  * Decode response as json\n  *\n  * @return  Promise\n  */\n\tjson() {\n\t\tvar _this2 = this;\n\n\t\treturn consumeBody.call(this).then(function (buffer) {\n\t\t\ttry {\n\t\t\t\treturn JSON.parse(buffer.toString());\n\t\t\t} catch (err) {\n\t\t\t\treturn Body.Promise.reject(new FetchError(`invalid json response body at ${_this2.url} reason: ${err.message}`, 'invalid-json'));\n\t\t\t}\n\t\t});\n\t},\n\n\t/**\n  * Decode response as text\n  *\n  * @return  Promise\n  */\n\ttext() {\n\t\treturn consumeBody.call(this).then(function (buffer) {\n\t\t\treturn buffer.toString();\n\t\t});\n\t},\n\n\t/**\n  * Decode response as buffer (non-spec api)\n  *\n  * @return  Promise\n  */\n\tbuffer() {\n\t\treturn consumeBody.call(this);\n\t},\n\n\t/**\n  * Decode response as text, while automatically detecting the encoding and\n  * trying to decode to UTF-8 (non-spec api)\n  *\n  * @return  Promise\n  */\n\ttextConverted() {\n\t\tvar _this3 = this;\n\n\t\treturn consumeBody.call(this).then(function (buffer) {\n\t\t\treturn convertBody(buffer, _this3.headers);\n\t\t});\n\t}\n};\n\n// In browsers, all properties are enumerable.\nObject.defineProperties(Body.prototype, {\n\tbody: { enumerable: true },\n\tbodyUsed: { enumerable: true },\n\tarrayBuffer: { enumerable: true },\n\tblob: { enumerable: true },\n\tjson: { enumerable: true },\n\ttext: { enumerable: true }\n});\n\nBody.mixIn = function (proto) {\n\tfor (const name of Object.getOwnPropertyNames(Body.prototype)) {\n\t\t// istanbul ignore else: future proof\n\t\tif (!(name in proto)) {\n\t\t\tconst desc = Object.getOwnPropertyDescriptor(Body.prototype, name);\n\t\t\tObject.defineProperty(proto, name, desc);\n\t\t}\n\t}\n};\n\n/**\n * Consume and convert an entire Body to a Buffer.\n *\n * Ref: https://fetch.spec.whatwg.org/#concept-body-consume-body\n *\n * @return  Promise\n */\nfunction consumeBody() {\n\tvar _this4 = this;\n\n\tif (this[INTERNALS].disturbed) {\n\t\treturn Body.Promise.reject(new TypeError(`body used already for: ${this.url}`));\n\t}\n\n\tthis[INTERNALS].disturbed = true;\n\n\tif (this[INTERNALS].error) {\n\t\treturn Body.Promise.reject(this[INTERNALS].error);\n\t}\n\n\tlet body = this.body;\n\n\t// body is null\n\tif (body === null) {\n\t\treturn Body.Promise.resolve(Buffer.alloc(0));\n\t}\n\n\t// body is blob\n\tif (isBlob(body)) {\n\t\tbody = body.stream();\n\t}\n\n\t// body is buffer\n\tif (Buffer.isBuffer(body)) {\n\t\treturn Body.Promise.resolve(body);\n\t}\n\n\t// istanbul ignore if: should never happen\n\tif (!(body instanceof Stream)) {\n\t\treturn Body.Promise.resolve(Buffer.alloc(0));\n\t}\n\n\t// body is stream\n\t// get ready to actually consume the body\n\tlet accum = [];\n\tlet accumBytes = 0;\n\tlet abort = false;\n\n\treturn new Body.Promise(function (resolve, reject) {\n\t\tlet resTimeout;\n\n\t\t// allow timeout on slow response body\n\t\tif (_this4.timeout) {\n\t\t\tresTimeout = setTimeout(function () {\n\t\t\t\tabort = true;\n\t\t\t\treject(new FetchError(`Response timeout while trying to fetch ${_this4.url} (over ${_this4.timeout}ms)`, 'body-timeout'));\n\t\t\t}, _this4.timeout);\n\t\t}\n\n\t\t// handle stream errors\n\t\tbody.on('error', function (err) {\n\t\t\tif (err.name === 'AbortError') {\n\t\t\t\t// if the request was aborted, reject with this Error\n\t\t\t\tabort = true;\n\t\t\t\treject(err);\n\t\t\t} else {\n\t\t\t\t// other errors, such as incorrect content-encoding\n\t\t\t\treject(new FetchError(`Invalid response body while trying to fetch ${_this4.url}: ${err.message}`, 'system', err));\n\t\t\t}\n\t\t});\n\n\t\tbody.on('data', function (chunk) {\n\t\t\tif (abort || chunk === null) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (_this4.size && accumBytes + chunk.length > _this4.size) {\n\t\t\t\tabort = true;\n\t\t\t\treject(new FetchError(`content size at ${_this4.url} over limit: ${_this4.size}`, 'max-size'));\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\taccumBytes += chunk.length;\n\t\t\taccum.push(chunk);\n\t\t});\n\n\t\tbody.on('end', function () {\n\t\t\tif (abort) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tclearTimeout(resTimeout);\n\n\t\t\ttry {\n\t\t\t\tresolve(Buffer.concat(accum, accumBytes));\n\t\t\t} catch (err) {\n\t\t\t\t// handle streams that have accumulated too much data (issue #414)\n\t\t\t\treject(new FetchError(`Could not create Buffer from response body for ${_this4.url}: ${err.message}`, 'system', err));\n\t\t\t}\n\t\t});\n\t});\n}\n\n/**\n * Detect buffer encoding and convert to target encoding\n * ref: http://www.w3.org/TR/2011/WD-html5-20110113/parsing.html#determining-the-character-encoding\n *\n * @param   Buffer  buffer    Incoming buffer\n * @param   String  encoding  Target encoding\n * @return  String\n */\nfunction convertBody(buffer, headers) {\n\tif (typeof convert !== 'function') {\n\t\tthrow new Error('The package `encoding` must be installed to use the textConverted() function');\n\t}\n\n\tconst ct = headers.get('content-type');\n\tlet charset = 'utf-8';\n\tlet res, str;\n\n\t// header\n\tif (ct) {\n\t\tres = /charset=([^;]*)/i.exec(ct);\n\t}\n\n\t// no charset in content type, peek at response body for at most 1024 bytes\n\tstr = buffer.slice(0, 1024).toString();\n\n\t// html5\n\tif (!res && str) {\n\t\tres = /<meta.+?charset=(['\"])(.+?)\\1/i.exec(str);\n\t}\n\n\t// html4\n\tif (!res && str) {\n\t\tres = /<meta[\\s]+?http-equiv=(['\"])content-type\\1[\\s]+?content=(['\"])(.+?)\\2/i.exec(str);\n\n\t\tif (res) {\n\t\t\tres = /charset=(.*)/i.exec(res.pop());\n\t\t}\n\t}\n\n\t// xml\n\tif (!res && str) {\n\t\tres = /<\\?xml.+?encoding=(['\"])(.+?)\\1/i.exec(str);\n\t}\n\n\t// found charset\n\tif (res) {\n\t\tcharset = res.pop();\n\n\t\t// prevent decode issues when sites use incorrect encoding\n\t\t// ref: https://hsivonen.fi/encoding-menu/\n\t\tif (charset === 'gb2312' || charset === 'gbk') {\n\t\t\tcharset = 'gb18030';\n\t\t}\n\t}\n\n\t// turn raw buffers into a single utf-8 buffer\n\treturn convert(buffer, 'UTF-8', charset).toString();\n}\n\n/**\n * Detect a URLSearchParams object\n * ref: https://github.com/bitinn/node-fetch/issues/296#issuecomment-307598143\n *\n * @param   Object  obj     Object to detect by type or brand\n * @return  String\n */\nfunction isURLSearchParams(obj) {\n\t// Duck-typing as a necessary condition.\n\tif (typeof obj !== 'object' || typeof obj.append !== 'function' || typeof obj.delete !== 'function' || typeof obj.get !== 'function' || typeof obj.getAll !== 'function' || typeof obj.has !== 'function' || typeof obj.set !== 'function') {\n\t\treturn false;\n\t}\n\n\t// Brand-checking and more duck-typing as optional condition.\n\treturn obj.constructor.name === 'URLSearchParams' || Object.prototype.toString.call(obj) === '[object URLSearchParams]' || typeof obj.sort === 'function';\n}\n\n/**\n * Check if `obj` is a W3C `Blob` object (which `File` inherits from)\n * @param  {*} obj\n * @return {boolean}\n */\nfunction isBlob(obj) {\n\treturn typeof obj === 'object' && typeof obj.arrayBuffer === 'function' && typeof obj.type === 'string' && typeof obj.stream === 'function' && typeof obj.constructor === 'function' && typeof obj.constructor.name === 'string' && /^(Blob|File)$/.test(obj.constructor.name) && /^(Blob|File)$/.test(obj[Symbol.toStringTag]);\n}\n\n/**\n * Clone body given Res/Req instance\n *\n * @param   Mixed  instance  Response or Request instance\n * @return  Mixed\n */\nfunction clone(instance) {\n\tlet p1, p2;\n\tlet body = instance.body;\n\n\t// don't allow cloning a used body\n\tif (instance.bodyUsed) {\n\t\tthrow new Error('cannot clone body after it is used');\n\t}\n\n\t// check that body is a stream and not form-data object\n\t// note: we can't clone the form-data object without having it as a dependency\n\tif (body instanceof Stream && typeof body.getBoundary !== 'function') {\n\t\t// tee instance body\n\t\tp1 = new PassThrough();\n\t\tp2 = new PassThrough();\n\t\tbody.pipe(p1);\n\t\tbody.pipe(p2);\n\t\t// set instance body to teed body and return the other teed body\n\t\tinstance[INTERNALS].body = p1;\n\t\tbody = p2;\n\t}\n\n\treturn body;\n}\n\n/**\n * Performs the operation \"extract a `Content-Type` value from |object|\" as\n * specified in the specification:\n * https://fetch.spec.whatwg.org/#concept-bodyinit-extract\n *\n * This function assumes that instance.body is present.\n *\n * @param   Mixed  instance  Any options.body input\n */\nfunction extractContentType(body) {\n\tif (body === null) {\n\t\t// body is null\n\t\treturn null;\n\t} else if (typeof body === 'string') {\n\t\t// body is string\n\t\treturn 'text/plain;charset=UTF-8';\n\t} else if (isURLSearchParams(body)) {\n\t\t// body is a URLSearchParams\n\t\treturn 'application/x-www-form-urlencoded;charset=UTF-8';\n\t} else if (isBlob(body)) {\n\t\t// body is blob\n\t\treturn body.type || null;\n\t} else if (Buffer.isBuffer(body)) {\n\t\t// body is buffer\n\t\treturn null;\n\t} else if (Object.prototype.toString.call(body) === '[object ArrayBuffer]') {\n\t\t// body is ArrayBuffer\n\t\treturn null;\n\t} else if (ArrayBuffer.isView(body)) {\n\t\t// body is ArrayBufferView\n\t\treturn null;\n\t} else if (typeof body.getBoundary === 'function') {\n\t\t// detect form data input from form-data module\n\t\treturn `multipart/form-data;boundary=${body.getBoundary()}`;\n\t} else if (body instanceof Stream) {\n\t\t// body is stream\n\t\t// can't really do much about this\n\t\treturn null;\n\t} else {\n\t\t// Body constructor defaults other things to string\n\t\treturn 'text/plain;charset=UTF-8';\n\t}\n}\n\n/**\n * The Fetch Standard treats this as if \"total bytes\" is a property on the body.\n * For us, we have to explicitly get it with a function.\n *\n * ref: https://fetch.spec.whatwg.org/#concept-body-total-bytes\n *\n * @param   Body    instance   Instance of Body\n * @return  Number?            Number of bytes, or null if not possible\n */\nfunction getTotalBytes(instance) {\n\tconst body = instance.body;\n\n\n\tif (body === null) {\n\t\t// body is null\n\t\treturn 0;\n\t} else if (isBlob(body)) {\n\t\treturn body.size;\n\t} else if (Buffer.isBuffer(body)) {\n\t\t// body is buffer\n\t\treturn body.length;\n\t} else if (body && typeof body.getLengthSync === 'function') {\n\t\t// detect form data input from form-data module\n\t\tif (body._lengthRetrievers && body._lengthRetrievers.length == 0 || // 1.x\n\t\tbody.hasKnownLength && body.hasKnownLength()) {\n\t\t\t// 2.x\n\t\t\treturn body.getLengthSync();\n\t\t}\n\t\treturn null;\n\t} else {\n\t\t// body is stream\n\t\treturn null;\n\t}\n}\n\n/**\n * Write a Body to a Node.js WritableStream (e.g. http.Request) object.\n *\n * @param   Body    instance   Instance of Body\n * @return  Void\n */\nfunction writeToStream(dest, instance) {\n\tconst body = instance.body;\n\n\n\tif (body === null) {\n\t\t// body is null\n\t\tdest.end();\n\t} else if (isBlob(body)) {\n\t\tbody.stream().pipe(dest);\n\t} else if (Buffer.isBuffer(body)) {\n\t\t// body is buffer\n\t\tdest.write(body);\n\t\tdest.end();\n\t} else {\n\t\t// body is stream\n\t\tbody.pipe(dest);\n\t}\n}\n\n// expose Promise\nBody.Promise = global.Promise;\n\n/**\n * headers.js\n *\n * Headers class offers convenient helpers\n */\n\nconst invalidTokenRegex = /[^\\^_`a-zA-Z\\-0-9!#$%&'*+.|~]/;\nconst invalidHeaderCharRegex = /[^\\t\\x20-\\x7e\\x80-\\xff]/;\n\nfunction validateName(name) {\n\tname = `${name}`;\n\tif (invalidTokenRegex.test(name) || name === '') {\n\t\tthrow new TypeError(`${name} is not a legal HTTP header name`);\n\t}\n}\n\nfunction validateValue(value) {\n\tvalue = `${value}`;\n\tif (invalidHeaderCharRegex.test(value)) {\n\t\tthrow new TypeError(`${value} is not a legal HTTP header value`);\n\t}\n}\n\n/**\n * Find the key in the map object given a header name.\n *\n * Returns undefined if not found.\n *\n * @param   String  name  Header name\n * @return  String|Undefined\n */\nfunction find(map, name) {\n\tname = name.toLowerCase();\n\tfor (const key in map) {\n\t\tif (key.toLowerCase() === name) {\n\t\t\treturn key;\n\t\t}\n\t}\n\treturn undefined;\n}\n\nconst MAP = Symbol('map');\nclass Headers {\n\t/**\n  * Headers class\n  *\n  * @param   Object  headers  Response headers\n  * @return  Void\n  */\n\tconstructor() {\n\t\tlet init = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : undefined;\n\n\t\tthis[MAP] = Object.create(null);\n\n\t\tif (init instanceof Headers) {\n\t\t\tconst rawHeaders = init.raw();\n\t\t\tconst headerNames = Object.keys(rawHeaders);\n\n\t\t\tfor (const headerName of headerNames) {\n\t\t\t\tfor (const value of rawHeaders[headerName]) {\n\t\t\t\t\tthis.append(headerName, value);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\t// We don't worry about converting prop to ByteString here as append()\n\t\t// will handle it.\n\t\tif (init == null) ; else if (typeof init === 'object') {\n\t\t\tconst method = init[Symbol.iterator];\n\t\t\tif (method != null) {\n\t\t\t\tif (typeof method !== 'function') {\n\t\t\t\t\tthrow new TypeError('Header pairs must be iterable');\n\t\t\t\t}\n\n\t\t\t\t// sequence<sequence<ByteString>>\n\t\t\t\t// Note: per spec we have to first exhaust the lists then process them\n\t\t\t\tconst pairs = [];\n\t\t\t\tfor (const pair of init) {\n\t\t\t\t\tif (typeof pair !== 'object' || typeof pair[Symbol.iterator] !== 'function') {\n\t\t\t\t\t\tthrow new TypeError('Each header pair must be iterable');\n\t\t\t\t\t}\n\t\t\t\t\tpairs.push(Array.from(pair));\n\t\t\t\t}\n\n\t\t\t\tfor (const pair of pairs) {\n\t\t\t\t\tif (pair.length !== 2) {\n\t\t\t\t\t\tthrow new TypeError('Each header pair must be a name/value tuple');\n\t\t\t\t\t}\n\t\t\t\t\tthis.append(pair[0], pair[1]);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// record<ByteString, ByteString>\n\t\t\t\tfor (const key of Object.keys(init)) {\n\t\t\t\t\tconst value = init[key];\n\t\t\t\t\tthis.append(key, value);\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tthrow new TypeError('Provided initializer must be an object');\n\t\t}\n\t}\n\n\t/**\n  * Return combined header value given name\n  *\n  * @param   String  name  Header name\n  * @return  Mixed\n  */\n\tget(name) {\n\t\tname = `${name}`;\n\t\tvalidateName(name);\n\t\tconst key = find(this[MAP], name);\n\t\tif (key === undefined) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn this[MAP][key].join(', ');\n\t}\n\n\t/**\n  * Iterate over all headers\n  *\n  * @param   Function  callback  Executed for each item with parameters (value, name, thisArg)\n  * @param   Boolean   thisArg   `this` context for callback function\n  * @return  Void\n  */\n\tforEach(callback) {\n\t\tlet thisArg = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : undefined;\n\n\t\tlet pairs = getHeaders(this);\n\t\tlet i = 0;\n\t\twhile (i < pairs.length) {\n\t\t\tvar _pairs$i = pairs[i];\n\t\t\tconst name = _pairs$i[0],\n\t\t\t      value = _pairs$i[1];\n\n\t\t\tcallback.call(thisArg, value, name, this);\n\t\t\tpairs = getHeaders(this);\n\t\t\ti++;\n\t\t}\n\t}\n\n\t/**\n  * Overwrite header values given name\n  *\n  * @param   String  name   Header name\n  * @param   String  value  Header value\n  * @return  Void\n  */\n\tset(name, value) {\n\t\tname = `${name}`;\n\t\tvalue = `${value}`;\n\t\tvalidateName(name);\n\t\tvalidateValue(value);\n\t\tconst key = find(this[MAP], name);\n\t\tthis[MAP][key !== undefined ? key : name] = [value];\n\t}\n\n\t/**\n  * Append a value onto existing header\n  *\n  * @param   String  name   Header name\n  * @param   String  value  Header value\n  * @return  Void\n  */\n\tappend(name, value) {\n\t\tname = `${name}`;\n\t\tvalue = `${value}`;\n\t\tvalidateName(name);\n\t\tvalidateValue(value);\n\t\tconst key = find(this[MAP], name);\n\t\tif (key !== undefined) {\n\t\t\tthis[MAP][key].push(value);\n\t\t} else {\n\t\t\tthis[MAP][name] = [value];\n\t\t}\n\t}\n\n\t/**\n  * Check for header name existence\n  *\n  * @param   String   name  Header name\n  * @return  Boolean\n  */\n\thas(name) {\n\t\tname = `${name}`;\n\t\tvalidateName(name);\n\t\treturn find(this[MAP], name) !== undefined;\n\t}\n\n\t/**\n  * Delete all header values given name\n  *\n  * @param   String  name  Header name\n  * @return  Void\n  */\n\tdelete(name) {\n\t\tname = `${name}`;\n\t\tvalidateName(name);\n\t\tconst key = find(this[MAP], name);\n\t\tif (key !== undefined) {\n\t\t\tdelete this[MAP][key];\n\t\t}\n\t}\n\n\t/**\n  * Return raw headers (non-spec api)\n  *\n  * @return  Object\n  */\n\traw() {\n\t\treturn this[MAP];\n\t}\n\n\t/**\n  * Get an iterator on keys.\n  *\n  * @return  Iterator\n  */\n\tkeys() {\n\t\treturn createHeadersIterator(this, 'key');\n\t}\n\n\t/**\n  * Get an iterator on values.\n  *\n  * @return  Iterator\n  */\n\tvalues() {\n\t\treturn createHeadersIterator(this, 'value');\n\t}\n\n\t/**\n  * Get an iterator on entries.\n  *\n  * This is the default iterator of the Headers object.\n  *\n  * @return  Iterator\n  */\n\t[Symbol.iterator]() {\n\t\treturn createHeadersIterator(this, 'key+value');\n\t}\n}\nHeaders.prototype.entries = Headers.prototype[Symbol.iterator];\n\nObject.defineProperty(Headers.prototype, Symbol.toStringTag, {\n\tvalue: 'Headers',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\nObject.defineProperties(Headers.prototype, {\n\tget: { enumerable: true },\n\tforEach: { enumerable: true },\n\tset: { enumerable: true },\n\tappend: { enumerable: true },\n\thas: { enumerable: true },\n\tdelete: { enumerable: true },\n\tkeys: { enumerable: true },\n\tvalues: { enumerable: true },\n\tentries: { enumerable: true }\n});\n\nfunction getHeaders(headers) {\n\tlet kind = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'key+value';\n\n\tconst keys = Object.keys(headers[MAP]).sort();\n\treturn keys.map(kind === 'key' ? function (k) {\n\t\treturn k.toLowerCase();\n\t} : kind === 'value' ? function (k) {\n\t\treturn headers[MAP][k].join(', ');\n\t} : function (k) {\n\t\treturn [k.toLowerCase(), headers[MAP][k].join(', ')];\n\t});\n}\n\nconst INTERNAL = Symbol('internal');\n\nfunction createHeadersIterator(target, kind) {\n\tconst iterator = Object.create(HeadersIteratorPrototype);\n\titerator[INTERNAL] = {\n\t\ttarget,\n\t\tkind,\n\t\tindex: 0\n\t};\n\treturn iterator;\n}\n\nconst HeadersIteratorPrototype = Object.setPrototypeOf({\n\tnext() {\n\t\t// istanbul ignore if\n\t\tif (!this || Object.getPrototypeOf(this) !== HeadersIteratorPrototype) {\n\t\t\tthrow new TypeError('Value of `this` is not a HeadersIterator');\n\t\t}\n\n\t\tvar _INTERNAL = this[INTERNAL];\n\t\tconst target = _INTERNAL.target,\n\t\t      kind = _INTERNAL.kind,\n\t\t      index = _INTERNAL.index;\n\n\t\tconst values = getHeaders(target, kind);\n\t\tconst len = values.length;\n\t\tif (index >= len) {\n\t\t\treturn {\n\t\t\t\tvalue: undefined,\n\t\t\t\tdone: true\n\t\t\t};\n\t\t}\n\n\t\tthis[INTERNAL].index = index + 1;\n\n\t\treturn {\n\t\t\tvalue: values[index],\n\t\t\tdone: false\n\t\t};\n\t}\n}, Object.getPrototypeOf(Object.getPrototypeOf([][Symbol.iterator]())));\n\nObject.defineProperty(HeadersIteratorPrototype, Symbol.toStringTag, {\n\tvalue: 'HeadersIterator',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\n/**\n * Export the Headers object in a form that Node.js can consume.\n *\n * @param   Headers  headers\n * @return  Object\n */\nfunction exportNodeCompatibleHeaders(headers) {\n\tconst obj = Object.assign({ __proto__: null }, headers[MAP]);\n\n\t// http.request() only supports string as Host header. This hack makes\n\t// specifying custom Host header possible.\n\tconst hostHeaderKey = find(headers[MAP], 'Host');\n\tif (hostHeaderKey !== undefined) {\n\t\tobj[hostHeaderKey] = obj[hostHeaderKey][0];\n\t}\n\n\treturn obj;\n}\n\n/**\n * Create a Headers object from an object of headers, ignoring those that do\n * not conform to HTTP grammar productions.\n *\n * @param   Object  obj  Object of headers\n * @return  Headers\n */\nfunction createHeadersLenient(obj) {\n\tconst headers = new Headers();\n\tfor (const name of Object.keys(obj)) {\n\t\tif (invalidTokenRegex.test(name)) {\n\t\t\tcontinue;\n\t\t}\n\t\tif (Array.isArray(obj[name])) {\n\t\t\tfor (const val of obj[name]) {\n\t\t\t\tif (invalidHeaderCharRegex.test(val)) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tif (headers[MAP][name] === undefined) {\n\t\t\t\t\theaders[MAP][name] = [val];\n\t\t\t\t} else {\n\t\t\t\t\theaders[MAP][name].push(val);\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (!invalidHeaderCharRegex.test(obj[name])) {\n\t\t\theaders[MAP][name] = [obj[name]];\n\t\t}\n\t}\n\treturn headers;\n}\n\nconst INTERNALS$1 = Symbol('Response internals');\n\n// fix an issue where \"STATUS_CODES\" aren't a named export for node <10\nconst STATUS_CODES = http.STATUS_CODES;\n\n/**\n * Response class\n *\n * @param   Stream  body  Readable stream\n * @param   Object  opts  Response options\n * @return  Void\n */\nclass Response {\n\tconstructor() {\n\t\tlet body = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n\t\tlet opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n\t\tBody.call(this, body, opts);\n\n\t\tconst status = opts.status || 200;\n\t\tconst headers = new Headers(opts.headers);\n\n\t\tif (body != null && !headers.has('Content-Type')) {\n\t\t\tconst contentType = extractContentType(body);\n\t\t\tif (contentType) {\n\t\t\t\theaders.append('Content-Type', contentType);\n\t\t\t}\n\t\t}\n\n\t\tthis[INTERNALS$1] = {\n\t\t\turl: opts.url,\n\t\t\tstatus,\n\t\t\tstatusText: opts.statusText || STATUS_CODES[status],\n\t\t\theaders,\n\t\t\tcounter: opts.counter\n\t\t};\n\t}\n\n\tget url() {\n\t\treturn this[INTERNALS$1].url || '';\n\t}\n\n\tget status() {\n\t\treturn this[INTERNALS$1].status;\n\t}\n\n\t/**\n  * Convenience property representing if the request ended normally\n  */\n\tget ok() {\n\t\treturn this[INTERNALS$1].status >= 200 && this[INTERNALS$1].status < 300;\n\t}\n\n\tget redirected() {\n\t\treturn this[INTERNALS$1].counter > 0;\n\t}\n\n\tget statusText() {\n\t\treturn this[INTERNALS$1].statusText;\n\t}\n\n\tget headers() {\n\t\treturn this[INTERNALS$1].headers;\n\t}\n\n\t/**\n  * Clone this response\n  *\n  * @return  Response\n  */\n\tclone() {\n\t\treturn new Response(clone(this), {\n\t\t\turl: this.url,\n\t\t\tstatus: this.status,\n\t\t\tstatusText: this.statusText,\n\t\t\theaders: this.headers,\n\t\t\tok: this.ok,\n\t\t\tredirected: this.redirected\n\t\t});\n\t}\n}\n\nBody.mixIn(Response.prototype);\n\nObject.defineProperties(Response.prototype, {\n\turl: { enumerable: true },\n\tstatus: { enumerable: true },\n\tok: { enumerable: true },\n\tredirected: { enumerable: true },\n\tstatusText: { enumerable: true },\n\theaders: { enumerable: true },\n\tclone: { enumerable: true }\n});\n\nObject.defineProperty(Response.prototype, Symbol.toStringTag, {\n\tvalue: 'Response',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\nconst INTERNALS$2 = Symbol('Request internals');\n\n// fix an issue where \"format\", \"parse\" aren't a named export for node <10\nconst parse_url = Url.parse;\nconst format_url = Url.format;\n\nconst streamDestructionSupported = 'destroy' in Stream.Readable.prototype;\n\n/**\n * Check if a value is an instance of Request.\n *\n * @param   Mixed   input\n * @return  Boolean\n */\nfunction isRequest(input) {\n\treturn typeof input === 'object' && typeof input[INTERNALS$2] === 'object';\n}\n\nfunction isAbortSignal(signal) {\n\tconst proto = signal && typeof signal === 'object' && Object.getPrototypeOf(signal);\n\treturn !!(proto && proto.constructor.name === 'AbortSignal');\n}\n\n/**\n * Request class\n *\n * @param   Mixed   input  Url or Request instance\n * @param   Object  init   Custom options\n * @return  Void\n */\nclass Request {\n\tconstructor(input) {\n\t\tlet init = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n\t\tlet parsedURL;\n\n\t\t// normalize input\n\t\tif (!isRequest(input)) {\n\t\t\tif (input && input.href) {\n\t\t\t\t// in order to support Node.js' Url objects; though WHATWG's URL objects\n\t\t\t\t// will fall into this branch also (since their `toString()` will return\n\t\t\t\t// `href` property anyway)\n\t\t\t\tparsedURL = parse_url(input.href);\n\t\t\t} else {\n\t\t\t\t// coerce input to a string before attempting to parse\n\t\t\t\tparsedURL = parse_url(`${input}`);\n\t\t\t}\n\t\t\tinput = {};\n\t\t} else {\n\t\t\tparsedURL = parse_url(input.url);\n\t\t}\n\n\t\tlet method = init.method || input.method || 'GET';\n\t\tmethod = method.toUpperCase();\n\n\t\tif ((init.body != null || isRequest(input) && input.body !== null) && (method === 'GET' || method === 'HEAD')) {\n\t\t\tthrow new TypeError('Request with GET/HEAD method cannot have body');\n\t\t}\n\n\t\tlet inputBody = init.body != null ? init.body : isRequest(input) && input.body !== null ? clone(input) : null;\n\n\t\tBody.call(this, inputBody, {\n\t\t\ttimeout: init.timeout || input.timeout || 0,\n\t\t\tsize: init.size || input.size || 0\n\t\t});\n\n\t\tconst headers = new Headers(init.headers || input.headers || {});\n\n\t\tif (inputBody != null && !headers.has('Content-Type')) {\n\t\t\tconst contentType = extractContentType(inputBody);\n\t\t\tif (contentType) {\n\t\t\t\theaders.append('Content-Type', contentType);\n\t\t\t}\n\t\t}\n\n\t\tlet signal = isRequest(input) ? input.signal : null;\n\t\tif ('signal' in init) signal = init.signal;\n\n\t\tif (signal != null && !isAbortSignal(signal)) {\n\t\t\tthrow new TypeError('Expected signal to be an instanceof AbortSignal');\n\t\t}\n\n\t\tthis[INTERNALS$2] = {\n\t\t\tmethod,\n\t\t\tredirect: init.redirect || input.redirect || 'follow',\n\t\t\theaders,\n\t\t\tparsedURL,\n\t\t\tsignal\n\t\t};\n\n\t\t// node-fetch-only options\n\t\tthis.follow = init.follow !== undefined ? init.follow : input.follow !== undefined ? input.follow : 20;\n\t\tthis.compress = init.compress !== undefined ? init.compress : input.compress !== undefined ? input.compress : true;\n\t\tthis.counter = init.counter || input.counter || 0;\n\t\tthis.agent = init.agent || input.agent;\n\t}\n\n\tget method() {\n\t\treturn this[INTERNALS$2].method;\n\t}\n\n\tget url() {\n\t\treturn format_url(this[INTERNALS$2].parsedURL);\n\t}\n\n\tget headers() {\n\t\treturn this[INTERNALS$2].headers;\n\t}\n\n\tget redirect() {\n\t\treturn this[INTERNALS$2].redirect;\n\t}\n\n\tget signal() {\n\t\treturn this[INTERNALS$2].signal;\n\t}\n\n\t/**\n  * Clone this request\n  *\n  * @return  Request\n  */\n\tclone() {\n\t\treturn new Request(this);\n\t}\n}\n\nBody.mixIn(Request.prototype);\n\nObject.defineProperty(Request.prototype, Symbol.toStringTag, {\n\tvalue: 'Request',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\nObject.defineProperties(Request.prototype, {\n\tmethod: { enumerable: true },\n\turl: { enumerable: true },\n\theaders: { enumerable: true },\n\tredirect: { enumerable: true },\n\tclone: { enumerable: true },\n\tsignal: { enumerable: true }\n});\n\n/**\n * Convert a Request to Node.js http request options.\n *\n * @param   Request  A Request instance\n * @return  Object   The options object to be passed to http.request\n */\nfunction getNodeRequestOptions(request) {\n\tconst parsedURL = request[INTERNALS$2].parsedURL;\n\tconst headers = new Headers(request[INTERNALS$2].headers);\n\n\t// fetch step 1.3\n\tif (!headers.has('Accept')) {\n\t\theaders.set('Accept', '*/*');\n\t}\n\n\t// Basic fetch\n\tif (!parsedURL.protocol || !parsedURL.hostname) {\n\t\tthrow new TypeError('Only absolute URLs are supported');\n\t}\n\n\tif (!/^https?:$/.test(parsedURL.protocol)) {\n\t\tthrow new TypeError('Only HTTP(S) protocols are supported');\n\t}\n\n\tif (request.signal && request.body instanceof Stream.Readable && !streamDestructionSupported) {\n\t\tthrow new Error('Cancellation of streamed requests with AbortSignal is not supported in node < 8');\n\t}\n\n\t// HTTP-network-or-cache fetch steps 2.4-2.7\n\tlet contentLengthValue = null;\n\tif (request.body == null && /^(POST|PUT)$/i.test(request.method)) {\n\t\tcontentLengthValue = '0';\n\t}\n\tif (request.body != null) {\n\t\tconst totalBytes = getTotalBytes(request);\n\t\tif (typeof totalBytes === 'number') {\n\t\t\tcontentLengthValue = String(totalBytes);\n\t\t}\n\t}\n\tif (contentLengthValue) {\n\t\theaders.set('Content-Length', contentLengthValue);\n\t}\n\n\t// HTTP-network-or-cache fetch step 2.11\n\tif (!headers.has('User-Agent')) {\n\t\theaders.set('User-Agent', 'node-fetch/1.0 (+https://github.com/bitinn/node-fetch)');\n\t}\n\n\t// HTTP-network-or-cache fetch step 2.15\n\tif (request.compress && !headers.has('Accept-Encoding')) {\n\t\theaders.set('Accept-Encoding', 'gzip,deflate');\n\t}\n\n\tlet agent = request.agent;\n\tif (typeof agent === 'function') {\n\t\tagent = agent(parsedURL);\n\t}\n\n\tif (!headers.has('Connection') && !agent) {\n\t\theaders.set('Connection', 'close');\n\t}\n\n\t// HTTP-network fetch step 4.2\n\t// chunked encoding is handled by Node.js\n\n\treturn Object.assign({}, parsedURL, {\n\t\tmethod: request.method,\n\t\theaders: exportNodeCompatibleHeaders(headers),\n\t\tagent\n\t});\n}\n\n/**\n * abort-error.js\n *\n * AbortError interface for cancelled requests\n */\n\n/**\n * Create AbortError instance\n *\n * @param   String      message      Error message for human\n * @return  AbortError\n */\nfunction AbortError(message) {\n  Error.call(this, message);\n\n  this.type = 'aborted';\n  this.message = message;\n\n  // hide custom error implementation details from end-users\n  Error.captureStackTrace(this, this.constructor);\n}\n\nAbortError.prototype = Object.create(Error.prototype);\nAbortError.prototype.constructor = AbortError;\nAbortError.prototype.name = 'AbortError';\n\n// fix an issue where \"PassThrough\", \"resolve\" aren't a named export for node <10\nconst PassThrough$1 = Stream.PassThrough;\nconst resolve_url = Url.resolve;\n\n/**\n * Fetch function\n *\n * @param   Mixed    url   Absolute url or Request instance\n * @param   Object   opts  Fetch options\n * @return  Promise\n */\nfunction fetch(url, opts) {\n\n\t// allow custom promise\n\tif (!fetch.Promise) {\n\t\tthrow new Error('native promise missing, set fetch.Promise to your favorite alternative');\n\t}\n\n\tBody.Promise = fetch.Promise;\n\n\t// wrap http.request into fetch\n\treturn new fetch.Promise(function (resolve, reject) {\n\t\t// build request object\n\t\tconst request = new Request(url, opts);\n\t\tconst options = getNodeRequestOptions(request);\n\n\t\tconst send = (options.protocol === 'https:' ? https : http).request;\n\t\tconst signal = request.signal;\n\n\t\tlet response = null;\n\n\t\tconst abort = function abort() {\n\t\t\tlet error = new AbortError('The user aborted a request.');\n\t\t\treject(error);\n\t\t\tif (request.body && request.body instanceof Stream.Readable) {\n\t\t\t\trequest.body.destroy(error);\n\t\t\t}\n\t\t\tif (!response || !response.body) return;\n\t\t\tresponse.body.emit('error', error);\n\t\t};\n\n\t\tif (signal && signal.aborted) {\n\t\t\tabort();\n\t\t\treturn;\n\t\t}\n\n\t\tconst abortAndFinalize = function abortAndFinalize() {\n\t\t\tabort();\n\t\t\tfinalize();\n\t\t};\n\n\t\t// send request\n\t\tconst req = send(options);\n\t\tlet reqTimeout;\n\n\t\tif (signal) {\n\t\t\tsignal.addEventListener('abort', abortAndFinalize);\n\t\t}\n\n\t\tfunction finalize() {\n\t\t\treq.abort();\n\t\t\tif (signal) signal.removeEventListener('abort', abortAndFinalize);\n\t\t\tclearTimeout(reqTimeout);\n\t\t}\n\n\t\tif (request.timeout) {\n\t\t\treq.once('socket', function (socket) {\n\t\t\t\treqTimeout = setTimeout(function () {\n\t\t\t\t\treject(new FetchError(`network timeout at: ${request.url}`, 'request-timeout'));\n\t\t\t\t\tfinalize();\n\t\t\t\t}, request.timeout);\n\t\t\t});\n\t\t}\n\n\t\treq.on('error', function (err) {\n\t\t\treject(new FetchError(`request to ${request.url} failed, reason: ${err.message}`, 'system', err));\n\t\t\tfinalize();\n\t\t});\n\n\t\treq.on('response', function (res) {\n\t\t\tclearTimeout(reqTimeout);\n\n\t\t\tconst headers = createHeadersLenient(res.headers);\n\n\t\t\t// HTTP fetch step 5\n\t\t\tif (fetch.isRedirect(res.statusCode)) {\n\t\t\t\t// HTTP fetch step 5.2\n\t\t\t\tconst location = headers.get('Location');\n\n\t\t\t\t// HTTP fetch step 5.3\n\t\t\t\tconst locationURL = location === null ? null : resolve_url(request.url, location);\n\n\t\t\t\t// HTTP fetch step 5.5\n\t\t\t\tswitch (request.redirect) {\n\t\t\t\t\tcase 'error':\n\t\t\t\t\t\treject(new FetchError(`redirect mode is set to error: ${request.url}`, 'no-redirect'));\n\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\treturn;\n\t\t\t\t\tcase 'manual':\n\t\t\t\t\t\t// node-fetch-specific step: make manual redirect a bit easier to use by setting the Location header value to the resolved URL.\n\t\t\t\t\t\tif (locationURL !== null) {\n\t\t\t\t\t\t\t// handle corrupted header\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\theaders.set('Location', locationURL);\n\t\t\t\t\t\t\t} catch (err) {\n\t\t\t\t\t\t\t\t// istanbul ignore next: nodejs server prevent invalid response headers, we can't test this through normal request\n\t\t\t\t\t\t\t\treject(err);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'follow':\n\t\t\t\t\t\t// HTTP-redirect fetch step 2\n\t\t\t\t\t\tif (locationURL === null) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 5\n\t\t\t\t\t\tif (request.counter >= request.follow) {\n\t\t\t\t\t\t\treject(new FetchError(`maximum redirect reached at: ${request.url}`, 'max-redirect'));\n\t\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 6 (counter increment)\n\t\t\t\t\t\t// Create a new Request object.\n\t\t\t\t\t\tconst requestOpts = {\n\t\t\t\t\t\t\theaders: new Headers(request.headers),\n\t\t\t\t\t\t\tfollow: request.follow,\n\t\t\t\t\t\t\tcounter: request.counter + 1,\n\t\t\t\t\t\t\tagent: request.agent,\n\t\t\t\t\t\t\tcompress: request.compress,\n\t\t\t\t\t\t\tmethod: request.method,\n\t\t\t\t\t\t\tbody: request.body,\n\t\t\t\t\t\t\tsignal: request.signal,\n\t\t\t\t\t\t\ttimeout: request.timeout\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 9\n\t\t\t\t\t\tif (res.statusCode !== 303 && request.body && getTotalBytes(request) === null) {\n\t\t\t\t\t\t\treject(new FetchError('Cannot follow redirect with body being a readable stream', 'unsupported-redirect'));\n\t\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 11\n\t\t\t\t\t\tif (res.statusCode === 303 || (res.statusCode === 301 || res.statusCode === 302) && request.method === 'POST') {\n\t\t\t\t\t\t\trequestOpts.method = 'GET';\n\t\t\t\t\t\t\trequestOpts.body = undefined;\n\t\t\t\t\t\t\trequestOpts.headers.delete('content-length');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 15\n\t\t\t\t\t\tresolve(fetch(new Request(locationURL, requestOpts)));\n\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// prepare response\n\t\t\tres.once('end', function () {\n\t\t\t\tif (signal) signal.removeEventListener('abort', abortAndFinalize);\n\t\t\t});\n\t\t\tlet body = res.pipe(new PassThrough$1());\n\n\t\t\tconst response_options = {\n\t\t\t\turl: request.url,\n\t\t\t\tstatus: res.statusCode,\n\t\t\t\tstatusText: res.statusMessage,\n\t\t\t\theaders: headers,\n\t\t\t\tsize: request.size,\n\t\t\t\ttimeout: request.timeout,\n\t\t\t\tcounter: request.counter\n\t\t\t};\n\n\t\t\t// HTTP-network fetch step 12.1.1.3\n\t\t\tconst codings = headers.get('Content-Encoding');\n\n\t\t\t// HTTP-network fetch step 12.1.1.4: handle content codings\n\n\t\t\t// in following scenarios we ignore compression support\n\t\t\t// 1. compression support is disabled\n\t\t\t// 2. HEAD request\n\t\t\t// 3. no Content-Encoding header\n\t\t\t// 4. no content response (204)\n\t\t\t// 5. content not modified response (304)\n\t\t\tif (!request.compress || request.method === 'HEAD' || codings === null || res.statusCode === 204 || res.statusCode === 304) {\n\t\t\t\tresponse = new Response(body, response_options);\n\t\t\t\tresolve(response);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// For Node v6+\n\t\t\t// Be less strict when decoding compressed responses, since sometimes\n\t\t\t// servers send slightly invalid responses that are still accepted\n\t\t\t// by common browsers.\n\t\t\t// Always using Z_SYNC_FLUSH is what cURL does.\n\t\t\tconst zlibOptions = {\n\t\t\t\tflush: zlib.Z_SYNC_FLUSH,\n\t\t\t\tfinishFlush: zlib.Z_SYNC_FLUSH\n\t\t\t};\n\n\t\t\t// for gzip\n\t\t\tif (codings == 'gzip' || codings == 'x-gzip') {\n\t\t\t\tbody = body.pipe(zlib.createGunzip(zlibOptions));\n\t\t\t\tresponse = new Response(body, response_options);\n\t\t\t\tresolve(response);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// for deflate\n\t\t\tif (codings == 'deflate' || codings == 'x-deflate') {\n\t\t\t\t// handle the infamous raw deflate response from old servers\n\t\t\t\t// a hack for old IIS and Apache servers\n\t\t\t\tconst raw = res.pipe(new PassThrough$1());\n\t\t\t\traw.once('data', function (chunk) {\n\t\t\t\t\t// see http://stackoverflow.com/questions/37519828\n\t\t\t\t\tif ((chunk[0] & 0x0F) === 0x08) {\n\t\t\t\t\t\tbody = body.pipe(zlib.createInflate());\n\t\t\t\t\t} else {\n\t\t\t\t\t\tbody = body.pipe(zlib.createInflateRaw());\n\t\t\t\t\t}\n\t\t\t\t\tresponse = new Response(body, response_options);\n\t\t\t\t\tresolve(response);\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// for br\n\t\t\tif (codings == 'br' && typeof zlib.createBrotliDecompress === 'function') {\n\t\t\t\tbody = body.pipe(zlib.createBrotliDecompress());\n\t\t\t\tresponse = new Response(body, response_options);\n\t\t\t\tresolve(response);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// otherwise, use response as-is\n\t\t\tresponse = new Response(body, response_options);\n\t\t\tresolve(response);\n\t\t});\n\n\t\twriteToStream(req, request);\n\t});\n}\n/**\n * Redirect code matching\n *\n * @param   Number   code  Status code\n * @return  Boolean\n */\nfetch.isRedirect = function (code) {\n\treturn code === 301 || code === 302 || code === 303 || code === 307 || code === 308;\n};\n\n// expose Promise\nfetch.Promise = global.Promise;\n\nexport default fetch;\nexport { Headers, Request, Response, FetchError };\n","const fetch = require(\"cross-fetch\");\n\nclass OAuth {\n    constructor (httpConfig) {\n        this.httpConfig = httpConfig;\n    }\n\n    async getAccessToken () {\n        const params = {\n            grant_type: \"client_credentials\",\n            scope: this.httpConfig.scopes,\n            client_id: this.httpConfig.clientID,\n            client_secret: this.httpConfig.clientSecret\n        };\n        const body = Object.entries(params)\n            .map(p => `${encodeURIComponent(p[0])}=${encodeURIComponent(p[1])}`)\n            .join(\"&\");\n        return fetch(`${this.httpConfig.issuer}/token`, {\n            method: \"POST\",\n            body: body,\n            headers: {\n                Accept: \"application/json\",\n                \"Content-Type\": \"application/x-www-form-urlencoded\"\n            }\n        });\n    }\n}\n\nmodule.exports = OAuth;\n"],"sourceRoot":""}